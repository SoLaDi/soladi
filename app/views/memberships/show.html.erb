<h1>Daten der Mitgliedschaft</h1>

<p>
  <strong>Mitgliedschaftsnummer:</strong>
  <%= @membership.id %>
</p>

<p>
  <strong>Startdatum:</strong>
  <%= @membership.startDate.strftime("%b %Y") %>
</p>

<p>
  <strong>Enddatum:</strong>
  <%= @membership.endDate ? @membership.endDate.strftime("%b %Y") : "" %>
</p>

<p>
  <strong>Verteilerstelle:</strong>
  <%= @membership.distribution_point.name %>
</p>

<p>
  <strong>Probezeit:</strong>
  <%= @membership.is_trial_membership? %>
</p>
<br/>

<h2>Zugeordnete Mitglieder</h2>

<script type="text/javascript">
    $(document).ready(function () {
        $('#rich-table-people').dataTable({
            ordering: true,
        });
    });
</script>

<table id="rich-table-people" class="table table-striped table-bordered">
  <thead>
  <tr>
    <th>Name</th>
    <th>Nachname</th>
    <th>E-Mail</th>
    <th>Telefon</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
  </thead>

  <tbody>
  <% @membership.people.each do |person| %>
    <tr>
      <td><%= person.name %></td>
      <td><%= person.surname %></td>
      <td><%= person.email %></td>
      <td><%= person.phone %></td>
      <td><%= link_to 'Show', person %></td>
      <td><%= link_to 'Edit', edit_person_path(person) %></td>
      <td><%= link_to 'Destroy', person, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<h2>Eingegangene Zahlungen</h2>

<script type="text/javascript">
    $(document).ready(function () {
        $('#rich-table-payments').dataTable({
            "ordering": true
        });
    });
</script>

<table id="rich-table-payments" class="table table-striped table-bordered">
  <thead>
  <tr>
    <th>Buchungsdatum</th>
    <th>Sender</th>
    <th>Buchungstext</th>
    <th>Betrag</th>
    <th>WÃ¤hrung</th>
    <th>Fehler</th>
    <th></th>
    <th></th>
    <th></th>
  </tr>
  </thead>

  <tbody>
  <% @membership.transactions.each do |transaction| %>
    <tr>
      <td><%= transaction.entry_date %></td>
      <td><%= transaction.sender %></td>
      <td><%= transaction.description %></td>
      <td><%= transaction.amount %></td>
      <td><%= transaction.currency %></td>
      <td><%= transaction.status_message %></td>
      <td><%= link_to 'Show', transaction %></td>
      <td><%= link_to 'Edit', edit_transaction_path(transaction) %></td>
      <td><%= link_to 'Destroy', transaction, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<h2>Gebote</h2>

<script type="text/javascript">
    $(document).ready(function () {
        $('#rich-table-bids').dataTable({
            "ordering": true,
        });
    });
</script>

<table id="rich-table-bids" class="table table-striped table-bordered">
  <thead>
  <tr>
    <th>Start</th>
    <th>Ende</th>
    <th>Preis</th>
    <th>Anteile</th>
  </tr>
  </thead>

  <tbody>
  <% @membership.bids.each do |bid| %>
    <tr>
      <td><%= bid["start_date"].strftime("%b %Y") %></td>
      <td><%= bid["end_date"].strftime("%b %Y") %></td>
      <td><%= bid["amount"] %></td>
      <td><%= bid["shares"] %></td>
    </tr>
  <% end %>
  </tbody>
</table>

<%= link_to 'Edit', edit_membership_path(@membership) %> |
<%= link_to 'Back', memberships_path %>
